我和游戏的羁绊，从这里正式开始啦！
虽然可能不值一提，但是所有策划和素材皆由个人制作，以下内容禁止用于商业盈利哦~

### 游戏简介
游戏设计的整体步骤大致分为游戏策划、素材制作和开发三大部分。首先讲讲策划思路。
这是一款适用于家庭中好友或伴侣的双人游戏。

游戏的灵感来源于家庭生活中不可避免的家务劳动。无论你是热爱家务劳动的勤劳小蜜蜂或者是个不爱打扫的懒虫，为了健康的生活环境和良好的生活习惯，也出于和好友、另一半共同经营快乐小窝的初心，共同分担家务或一起劳动，是最为合理、健康的方式。

因此，这款游戏存在的意义如下：
1. 它能给家庭成员提供一种休闲娱乐方式。
2. 它可以连接游戏世界和现实生活。
3. 它能够起到，监督双方进行家务劳动的作用，也能够增加双方的联系和感情。但要注意的是，游戏只是起到唤醒劳动意识的作用，而非让成员依赖游戏来分配家庭劳动。

游戏模式：
1. 游戏主体有两个角色，目前设为一男一女。
2. 游戏中内置多个小游戏，小游戏分为单人模式和双人模式两种。
3. 单人模式适用于个人。个人所代表的角色能够从单人游戏中获得经验值、较多能量豆和少量劳动币。劳动币通过发现隐藏道具的方式获得。
4. 双人模式适用于两人。两人在竞技或合作游戏中可以获得少量能量豆和较多劳动币、欢喜糖。
5. 经验值用于等级提升，可以衡量角色在个人游戏中的经历，且等级提升可解锁特殊道具等。能量豆用于角色属性的提升或技能解锁，使战斗中获得更强的能力，可用于平衡两个玩家间的实力。劳动币可用于兑换指使对方劳动的派遣书，不同劳动类型需要的劳动币数量有所差别，劳动过后可以给劳动者颁发劳动证书，以示鼓励。欢喜糖用于兑换生活奖励券，奖励类型有多种，比如小零食、亲亲、出门玩、陪玩其他游戏等等。

游戏开展和维持的难度在于，此游戏需玩家双方的高度认可才能正常进行，以发挥游戏的最大价值，否则与普通的单人和双人游戏无甚区别。

PS：理想状态下，该游戏不需要联网支持，为离线模式。适合于家庭电视或大屏电脑+双手柄（或者双鼠标，好奇怪哦）来支持双人模式游戏。内置多种小游戏的目的只是为了练手而已啦~~
### 游戏角色及道具
游戏角色基于本人之前绘制的[表情包](/paintings/collections/magical_star)，目前只有这两个角色可选择。左边是小星星，右边是小橙子。
<div align="middle"><img  width="400" src="/assets/images/thehousework/characters.gif"></div>

### 场景界面
有了基本的游戏策划，便边写边画边做，进入引擎开始正式制作游戏。
第一步是场景搭建。根据策划，介绍目前搭建的主要界面以及功能。
- **主界面**：通往各个信息页以及游戏场景的关键界面，因此也需要制作相应UI便于场景切换。主界面场景为家中客厅，坐在地毯上的两个小人便是游戏主角色星星和小橙子，点击便可进入角色对应的信息界面。
- **角色信息界面**：右侧包含角色基本信息、当前等级及货币数量、角色属性（比如智慧值、力量值）、技能以及技能等级等，左侧为角色画像，画像下方为角色的背包、商城以及成就界面入口。
- **游戏入口界面**：目前的设想是尝试单人操作游戏以及双人操作游戏两种，因此在主界面设置两个按钮，分别切换到单人游戏（目前含横板跑酷和横板探索）和双人游戏（目前只做了五子棋，计划横板战斗以及卡牌类）。除此之外，还计划在小房子前后设置前院和后院并增添种菜模式和养宠物模式（总之就是统统安排...还有好多东西要肝...地球物理的女人绝不认输！！）。
- **游戏界面**：各种小游戏玩耍界面，具体可见后面内容。
<div align="middle"><img  width="400" src="/assets/images/thehousework/thehousework.gif"></div>

### 小游戏

#### 五子棋
最先做的还是棋类游戏。起因是寒假在家父亲大人要参加单位组织的打牌活动，其中就包括五子棋，所以我也顺手尝试一下，零零散散三天成型，大致经历了以下步骤：
1. 搭建场景。使用**Tilemap**绘制背景和棋盘格；把图片素材以及返回按钮设置好。
2. 制作棋子。棋子制作为**预制体(Prefabs)**，然后编写脚本切换生成黑白子，同时引入图片切换。
3. 编写判断五子连线的算法，在下棋过程中自动判定某方获胜并进行胜利提示，锁定棋盘。
4. 提供开始游戏按钮以及再来一局按钮，提供开局时选择哪个角色执黑子白子，哪个角色先行棋。棋局未开始时不能落子，棋盘之外不能落子。
<div align="middle"><img  width="400" src="/assets/images/thehousework/wuziqi.gif"></div>

#### 横板跑酷类
1. 背景搭建。给地面添加碰撞组件（BoxCollider2D）。
2. 放置角色。将小星星位置x方向固定后设置跳跃。跳跃的实现十分简单，给角色添加BoxCollider2D和Rigidbody2D，使角色和场景可碰撞接触。编写脚本，设置按Space后给刚体施加一个向上的脉冲力：
```
public float force = 30f;
private Vector2 jumpDirect = new Vector2(0,1);
Rigidbody2D starbody;
// Start is called before the first frame update
void Start(){
    starbody = GetComponent<Rigidbody2D>();
}

void Update(){
    if (!Pause.pause){
        // --- 按空格起跳 -----
        if (Input.GetKeyDown(KeyCode.Space)){
            starbody.AddForce(jumpDirect*force,ForceMode2D.Impulse);
        }
    } 
}
```
3. 设置碰撞可得分的“紫色星星”。将此类制作成预制体，并在Update函数中不断生成新的星星，从摄像机视野范围外从右向左移动，直到10 s后销毁。

<div align="middle"><img  width="400" src="/assets/images/thehousework/starrun2.gif"></div>

制作过程中遇到一个有意思的点，在网上也没有搜到类似的问题（可能太简单了/狗头）。如上图，就是角色和其他物体碰撞时会产生了反作用力，导致角色被反弹回来。尝试解决过程中试了改变双方碰撞区域，但是效果有瑕疵且没有从根本上解决。转念一想物体之所以碰撞发生力的变化是因为引擎框架可能默认每个添加了BoxCollider2D组件的对象都具有了一些物理属性，因此给预制体新添加了刚体组件，质量归零后就不会有反作用力了。

<div align="middle"><img  width="400" src="/assets/images/thehousework/starrun1.gif"></div>

#### 横板探索类

我理解的横板探索和横板跑酷区别就是前者可以自由移动，后者依靠背景移动的视觉效果营造角色在快速移动的效果，比如神庙逃亡。
因此，像所有具有地图探索、开放世界的游戏一样，相机跟随角色是关键。效果如下：

<div align="middle"><img  width="400" src="/assets/images/thehousework/staradventure1.gif"></div>

解决了角色左右移动、场景基本要素以及相机跟随后，现在重点讲讲跳跃的问题。我们在玩类似游戏时，已经习惯了**WSAD**+**Space**组合键带来的前后左右跳跃效果，但在自己尝试这个功能前，我从未考虑过组合键顺序带来的跳跃效果的差异问题。横板中跳跃分三类情况：
1. 按Space键垂直跳跃
2. AD+Space组合键跳跃
3. Space+AD组合键跳跃
   
第一类情况如下所示，在前面的跑酷中已实现：
<div align="middle"><img  width="400" src="/assets/images/thehousework/staradventure2.gif"></div>

关键在于后两类。首先在连按AD键形成左右移动的过程中，再按下Space时，记录按下时瞬间的位移值moveX，根据位移值比例添加一个倾斜方向的脉冲力F，角色的移动便是一定角度力的作用结果：
```float moveX = Input.GetAxisRaw("Horizontal");```
<div align="middle"><img  width="400" src="/assets/images/thehousework/staradventure4.gif"></div>

而按下Space键后很短时间内按下AD键，逻辑就是在起跳时添加垂直向上的脉冲力F1，按下左右键时再添加水平方向上的脉冲力F2：

<div align="middle"><img  width="400" src="/assets/images/thehousework/staradventure3.gif"></div>

这就导致两种组合键方式下跳跃的路径不一致，看示意图就很容易理解了：
<div align="middle"><img  width="400" src="/assets/images/thehousework/force.jpg"></div>




### 用于结尾的碎碎念
独立制作游戏确实是一个漫长的过程。游戏框架是在21年11月的某一天中午思考了片刻就瞎编出来的，在此之前我随手画的小卡通形象派上了用场，并在当月给两个角色分别绘制了套表情包上架到微信，也是十分有趣，且一发不可收。学习十分繁重的情况下，终于在今年寒假跟学了一个Unity教程后上手自己制作，不得不说比Pygame要方便的多。本着练习的态度，想给这个游戏框架塞各种小游戏，同时引入道具系统、升级养成、收集以及种田模式等等等等，总之慢慢来吧，乐在其中。

目前，对我而言更重要的不是这个游戏画风如何好、有没有渲染、动画是否丝滑流畅，而是通过各类型游戏熟悉Unity各种功能和内置函数的使用，然后熟，才能生巧喽。

[*back to index*](/games/index)

[*back to home*](https://fiiish-yu.github.io/)